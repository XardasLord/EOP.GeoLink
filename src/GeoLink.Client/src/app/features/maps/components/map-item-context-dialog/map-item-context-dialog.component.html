<table #myTable>
  <tr class="header-summary-row">
    <th>{{ getObjectType() }}</th>
    <th>{{ mapObject.nrExpl }}</th>
  </tr>
  <tr class="header-summary-row">
    <th>Nazwa</th>
    <th>{{ mapObject.name }}</th>
  </tr>
  <tr>
    <th>Kategoria</th>
    <th>Status</th>
  </tr>

  <ng-container *ngFor="let deviceModelType of groupedDeviceTypes | keyvalue">
    <td colspan="2" class="group-name">{{ deviceModelType.key }}</td>
    <ng-container *ngFor="let deviceModel of deviceModelType.value">
      <tr class="device-item-row" (click)="showDeviceSubMenu(deviceModel, $event)">
        <td>{{ getDeviceType(+deviceModel.devType) }}</td>
        <td>
          <mat-icon
            matTooltip="abc test 123"
            [ngClass]="{
              good: deviceModel?.idStatus === deviceStatus.OK,
              warning: deviceModel?.idStatus === deviceStatus.Warning,
              bad: deviceModel?.idStatus === deviceStatus.Error,
              'not-available': deviceModel?.idStatus === deviceStatus.NotAvailable
            }"
            svgIcon="circle"></mat-icon>
        </td>
      </tr>
    </ng-container>
  </ng-container>
</table>

<!-- Second level context menu -->
<div class="second-level-table" [ngStyle]="{ left: subMenuElementLeft, top: subMenuElementTop }" *ngIf="showSubMenu">
  <table>
    <a class="leaflet-popup-close-button" (click)="closeSubMenu()">×</a>
    <tr class="header-summary-row">
      <th>{{ getDeviceType(secondLevelDeviceDetailsModel.devType) }}</th>
      <th colspan="2">{{ secondLevelDeviceDetailsModel.producer }}</th>
    </tr>
    <tr class="header-summary-row">
      <th>Typ</th>
      <th colspan="2">{{ secondLevelDeviceDetailsModel.model }}</th>
    </tr>
    <tr class="header-summary-row" *ngIf="secondLevelDeviceDetailsModel.ppe">
      <th>PPE</th>
      <th colspan="2">{{ secondLevelDeviceDetailsModel.ppe }}</th>
    </tr>
    <tr>
      <th>Parametr</th>
      <th>Wartość</th>
      <th>Status</th>
    </tr>

    <ng-container *ngFor="let deviceDetailsParam of secondLevelDeviceDetailsModel.params">
      <tr class="device-item-row" (click)="showAttributeStatusChart(deviceDetailsParam, $event)">
        <td>{{ deviceDetailsParam.name }}</td>
        <td>{{ deviceDetailsParam.value }}</td>
        <td>
          <mat-icon
            *ngIf="deviceDetailsParam?.status"
            matTooltip="abc test 123"
            [ngClass]="{
              good: deviceDetailsParam?.status === deviceStatus.OK,
              warning: deviceDetailsParam?.status === deviceStatus.Warning,
              bad: deviceDetailsParam?.status === deviceStatus.Error,
              'not-available': deviceDetailsParam?.status === deviceStatus.NotAvailable
            }"
            svgIcon="circle"></mat-icon>
          <span *ngIf="!deviceDetailsParam?.status">n.d.</span>
        </td>
      </tr>
    </ng-container>
  </table>
</div>

<ng-container *ngIf="showChartMenu">
  <div
    class="status-chart-content first"
    [ngStyle]="{ left: attributeStatusChartElementLeft, top: attributeStatusChartElementTop }">
    <app-single-device-attribute-chart [attributeId]="selectedAttributeId"></app-single-device-attribute-chart>
  </div>
</ng-container>
